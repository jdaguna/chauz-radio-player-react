{"ast":null,"code":"import _classCallCheck from \"/Users/josh/Downloads/bloc-jams-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/josh/Downloads/bloc-jams-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/josh/Downloads/bloc-jams-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/josh/Downloads/bloc-jams-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/josh/Downloads/bloc-jams-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/josh/Downloads/bloc-jams-react/src/components/Album.js\";\nimport React, { Component } from 'react';\nimport albumData from './../data/albums';\nimport PlayerBar from './PlayerBar';\n\nvar Album =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Album, _Component);\n\n  function Album(props) {\n    var _this;\n\n    _classCallCheck(this, Album);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Album).call(this, props));\n    var album = albumData.find(function (album) {\n      return album.slug === _this.props.match.params.slug;\n    });\n    _this.state = {\n      album: album,\n      currentSong: null,\n      currentTime: null,\n      displayTime: null,\n      displayDuration: 0,\n      duration: album.songs[0].duration,\n      isPlaying: false,\n      volume: 0,\n      isHovered: 0\n    };\n    _this.audioElement = document.createElement('audio');\n    _this.audioElement.src = null;\n    return _this;\n  }\n\n  _createClass(Album, [{\n    key: \"play\",\n    value: function play() {\n      this.audioElement.play();\n      this.setState({\n        isPlaying: true\n      });\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.audioElement.pause();\n      this.setState({\n        isPlaying: false\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.eventListeners = {\n        timeupdate: function timeupdate(e) {\n          _this2.setState({\n            currentTime: _this2.audioElement.currentTime\n          });\n        },\n        durationchange: function durationchange(e) {\n          _this2.setState({\n            duration: _this2.audioElement.duration\n          });\n        },\n        volumechange: function volumechange(e) {\n          _this2.setState({\n            volume: _this2.audioElement.volume\n          });\n        }\n      };\n      this.audioElement.addEventListener('timeupdate', this.eventListeners.timeupdate);\n      this.audioElement.addEventListener('durationchange', this.eventListeners.durationchnage);\n      this.audioElement.addEventListener('volumechange', this.eventListeners.volumechange);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.audioElement.src = null;\n      this.audioElement.removeEventListener('timeupdate', this.eventListeners.timeupdate);\n      this.audioElement.removeEventListener('durationchange', this.eventListeners.durationchange);\n      this.audioElement.removeEventListener('volumechange', this.eventListeners.volumechange);\n    }\n  }, {\n    key: \"formatTime\",\n    value: function formatTime(time) {\n      if (time > 0) {\n        var tempMin = time / 60;\n        tempMin = parseInt(tempMin);\n        var minutes = tempMin.toString();\n        var tempSeconds = time % 60;\n        tempSeconds = parseInt(tempSeconds);\n\n        if (tempSeconds < 60 && tempSeconds > 9) {\n          var seconds = tempSeconds.toString();\n        } else if (tempSeconds < 10 && tempSeconds > 0) {\n          seconds = \"0\" + tempSeconds.toString();\n        } else {\n          seconds = \"00\";\n        }\n\n        return minutes + \":\" + seconds;\n      } else {\n        return \"-:--\";\n      }\n    }\n  }, {\n    key: \"setSong\",\n    value: function setSong(song) {\n      this.audioElement.src = song.audioSrc;\n      this.setState({\n        currentSong: song\n      });\n    }\n  }, {\n    key: \"handleSongClick\",\n    value: function handleSongClick(song) {\n      var isSameSong = this.state.currentSong === song;\n\n      if (this.state.isPlaying && isSameSong) {\n        this.pause();\n      } else {\n        if (!isSameSong) {\n          this.setSong(song);\n        }\n\n        this.play();\n      }\n    }\n  }, {\n    key: \"handlePrevClick\",\n    value: function handlePrevClick() {\n      var _this3 = this;\n\n      var currentIndex = this.state.album.songs.findIndex(function (song) {\n        return _this3.state.currentSong === song;\n      });\n      var newIndex = Math.max(0, currentIndex - 1);\n      var newSong = this.state.album.songs[newIndex];\n      this.setSong(newSong);\n      this.play();\n    }\n  }, {\n    key: \"handleNextClick\",\n    value: function handleNextClick() {\n      var _this4 = this;\n\n      var currentIndex = this.state.album.songs.findIndex(function (song) {\n        return _this4.state.currentSong === song;\n      });\n      var newIndex = Math.min(currentIndex + 1, this.state.album.songs.length - 1);\n      var newSong = this.state.album.songs[newIndex];\n      this.setSong(newSong);\n      this.play();\n    }\n  }, {\n    key: \"handleTimeChange\",\n    value: function handleTimeChange(e) {\n      var newTime = this.audioElement.duration * e.target.value || 0;\n      this.audioElement.currentTime = newTime;\n      this.setState({\n        currentTime: newTime\n      });\n    }\n  }, {\n    key: \"handleVolumeChange\",\n    value: function handleVolumeChange(e) {\n      var newVolume = e.target.value;\n      this.audioElement.volume = newVolume;\n      this.setState({\n        volume: newVolume\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return React.createElement(\"section\", {\n        className: \"album flexParentAlbum\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        id: \"album-info\",\n        className: \"flexChildAlbum\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"album-cover-art\",\n        src: this.state.album.albumCover,\n        alt: this.state.album.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"album-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        id: \"album-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, this.state.album.title), React.createElement(\"h2\", {\n        className: \"artist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, this.state.album.artist), React.createElement(\"div\", {\n        id: \"release-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, this.state.album.releaseInfo))), React.createElement(\"section\", {\n        id: \"songAndPlayer\",\n        className: \"flexChildAlbum\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"table-bg f\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(\"table\", {\n        id: \"song-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"colgroup\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"col\", {\n        id: \"song-number-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }), React.createElement(\"col\", {\n        id: \"song-title-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), React.createElement(\"col\", {\n        id: \"song-duration-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      })), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, this.state.album.songs.map(function (song, index) {\n        return React.createElement(\"tr\", {\n          className: \"song\",\n          key: index,\n          onClick: function onClick() {\n            return _this5.handleSongClick(song);\n          },\n          onMouseEnter: function onMouseEnter() {\n            return _this5.setState({\n              isHovered: index + 1\n            });\n          },\n          onMouseLeave: function onMouseLeave() {\n            return _this5.setState({\n              isHovered: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          className: \"song-actions\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166\n          },\n          __self: this\n        }, _this5.state.currentSong && _this5.state.currentSong.title === song.title ? React.createElement(\"span\", {\n          className: _this5.state.isPlaying ? \"ion-ios-pause\" : \"ion-ios-play\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }) : _this5.state.isHovered === index + 1 ? React.createElement(\"span\", {\n          className: \"ion-ios-play\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }) : React.createElement(\"span\", {\n          className: \"song-number\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, index + 1))), React.createElement(\"td\", {\n          id: \"song-title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178\n          },\n          __self: this\n        }, song.title), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, _this5.formatTime(song.duration)));\n      })))), React.createElement(PlayerBar, {\n        isPlaying: this.state.isPlaying,\n        currentSong: this.state.currentSong,\n        currentTime: this.audioElement.currentTime,\n        displayTime: this.formatTime(this.audioElement.currentTime),\n        displayDuration: this.formatTime(this.audioElement.duration),\n        duration: this.audioElement.duration,\n        volume: this.audioElement.volume,\n        handleSongClick: function handleSongClick() {\n          return _this5.handleSongClick(_this5.state.currentSong);\n        },\n        handlePrevClick: function handlePrevClick() {\n          return _this5.handlePrevClick();\n        },\n        handleNextClick: function handleNextClick() {\n          return _this5.handleNextClick();\n        },\n        handleTimeChange: function handleTimeChange(e) {\n          return _this5.handleTimeChange(e);\n        },\n        handleVolumeChange: function handleVolumeChange(e) {\n          return _this5.handleVolumeChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Album;\n}(Component);\n\nexport default Album;","map":{"version":3,"sources":["/Users/josh/Downloads/bloc-jams-react/src/components/Album.js"],"names":["React","Component","albumData","PlayerBar","Album","props","album","find","slug","match","params","state","currentSong","currentTime","displayTime","displayDuration","duration","songs","isPlaying","volume","isHovered","audioElement","document","createElement","src","play","setState","pause","eventListeners","timeupdate","e","durationchange","volumechange","addEventListener","durationchnage","removeEventListener","time","tempMin","parseInt","minutes","toString","tempSeconds","seconds","song","audioSrc","isSameSong","setSong","currentIndex","findIndex","newIndex","Math","max","newSong","min","length","newTime","target","value","newVolume","albumCover","title","artist","releaseInfo","map","index","handleSongClick","formatTime","handlePrevClick","handleNextClick","handleTimeChange","handleVolumeChange"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport albumData from './../data/albums';\nimport PlayerBar from './PlayerBar';\nclass Album extends Component{\n  constructor(props){\n    super(props);\n\n    const album = albumData.find( album => {\n      return album.slug === this.props.match.params.slug\n    });\n\n    this.state = {\n      album: album,\n      currentSong: null,\n      currentTime: null,\n      displayTime: null,\n      displayDuration: 0,\n      duration: album.songs[0].duration,\n      isPlaying: false,\n      volume: 0,\n      isHovered: 0\n    };\n\n\n    this.audioElement = document.createElement('audio');\n    this.audioElement.src = null;\n  }\n\n\n  play(){\n    this.audioElement.play();\n    this.setState({isPlaying: true});\n  }\n\n  pause(){\n    this.audioElement.pause();\n    this.setState({isPlaying: false});\n  }\n\n  componentDidMount(){\n    this.eventListeners={\n      timeupdate: e =>{\n        this.setState({ currentTime: this.audioElement.currentTime });\n      },\n      durationchange: e => {\n        this.setState({duration: this.audioElement.duration});\n      },\n      volumechange: e => {\n        this.setState({volume: this.audioElement.volume});\n      }\n\n\n    };\n    this.audioElement.addEventListener('timeupdate', this.eventListeners.timeupdate);\n    this.audioElement.addEventListener('durationchange', this.eventListeners.durationchnage);\n    this.audioElement.addEventListener('volumechange', this.eventListeners.volumechange);\n\n\n\n\n  }\n\n  componentWillUnmount () {\n    this.audioElement.src = null;\n    this.audioElement.removeEventListener('timeupdate', this.eventListeners.timeupdate);\n    this.audioElement.removeEventListener('durationchange', this.eventListeners.durationchange);\n    this.audioElement.removeEventListener('volumechange', this.eventListeners.volumechange);\n  }\n\n  formatTime(time)\n  {\n    if(time > 0)\n    {\n      var tempMin = time / 60;\n      tempMin = parseInt(tempMin);\n      var minutes = tempMin.toString();\n      var tempSeconds = time % 60;\n      tempSeconds = parseInt(tempSeconds);\n      if (tempSeconds < 60 && tempSeconds > 9)\n      {\n        var seconds = tempSeconds.toString();\n      }\n      else if(tempSeconds < 10 && tempSeconds >0)\n      {\n        seconds = \"0\" + tempSeconds.toString();\n      }\n      else\n      {\n        seconds = \"00\"\n      }\n      return minutes + \":\" + seconds\n    }\n    else\n    {\n      return \"-:--\";\n    }\n  }\n\n\n  setSong(song){\n    this.audioElement.src = song.audioSrc;\n    this.setState({currentSong: song});\n  }\n\n  handleSongClick(song){\n    const isSameSong = this.state.currentSong === song;\n    if (this.state.isPlaying && isSameSong){\n      this.pause();\n    }else{\n      if (!isSameSong){this.setSong(song);}\n      this.play();\n    }\n  }\n\n  handlePrevClick(){\n    const currentIndex = this.state.album.songs.findIndex(song => this.state.currentSong === song);\n    const newIndex = Math.max(0, currentIndex - 1);\n    const newSong = this.state.album.songs[newIndex];\n    this.setSong(newSong);\n    this.play();\n  }\n\n  handleNextClick(){\n    const currentIndex = this.state.album.songs.findIndex(song => this.state.currentSong === song);\n    const newIndex = Math.min(currentIndex+1, this.state.album.songs.length-1);\n    const newSong = this.state.album.songs[newIndex];\n    this.setSong(newSong);\n    this.play();\n  }\n\n  handleTimeChange(e) {\n    const newTime = this.audioElement.duration * e.target.value || 0;\n    this.audioElement.currentTime = newTime;\n    this.setState({ currentTime: newTime });\n  }\n\n  handleVolumeChange(e){\n    const newVolume = e.target.value;\n    this.audioElement.volume = newVolume;\n    this.setState({ volume: newVolume});\n  }\n\n  render(){\n    return(\n      <section className=\"album flexParentAlbum\">\n      <section id=\"album-info\" className=\"flexChildAlbum\">\n      <img id=\"album-cover-art\" src={this.state.album.albumCover} alt={this.state.album.title}/>\n      <div className=\"album-details\">\n      <h1 id=\"album-title\">{this.state.album.title}</h1>\n      <h2 className=\"artist\">{this.state.album.artist}</h2>\n      <div id=\"release-info\">{this.state.album.releaseInfo}</div>\n      </div>\n      </section>\n      <section id=\"songAndPlayer\"className=\"flexChildAlbum\">\n      <div className=\"table-bg f\">\n        <table id=\"song-list\">\n        <colgroup>\n        <col id=\"song-number-column\" />\n        <col id=\"song-title-column\" />\n        <col id=\"song-duration-column\"/>\n        </colgroup>\n        <tbody>\n        {this.state.album.songs.map((song, index) =>\n          <tr className=\"song\" key={index} onClick={()=>this.handleSongClick(song)} onMouseEnter={()=> this.setState({isHovered : index+1})} onMouseLeave={()=> this.setState({isHovered: false})}>\n          <td className=\"song-actions\">\n          <button>\n          {\n            (this.state.currentSong && this.state.currentSong.title === song.title) ?\n            <span className={this.state.isPlaying ? \"ion-ios-pause\" : \"ion-ios-play\"}></span>\n            :\n            (this.state.isHovered === index+1) ?\n            <span className=\"ion-ios-play\"></span>\n            :\n            <span className=\"song-number\">{index+1}</span>\n          }\n          </button>\n          </td>\n          <td id=\"song-title\">{song.title}</td>\n\n          <td>{this.formatTime(song.duration)}</td>\n          </tr>\n        )}\n        </tbody>\n\n        </table>\n      </div>\n\n\n      <PlayerBar\n      isPlaying={this.state.isPlaying}\n      currentSong={this.state.currentSong}\n      currentTime={(this.audioElement.currentTime)}\n      displayTime={this.formatTime(this.audioElement.currentTime)}\n      displayDuration={this.formatTime(this.audioElement.duration)}\n      duration={(this.audioElement.duration)}\n      volume={this.audioElement.volume}\n      handleSongClick={()=>this.handleSongClick(this.state.currentSong)}\n      handlePrevClick={()=>this.handlePrevClick()}\n      handleNextClick={()=>this.handleNextClick()}\n      handleTimeChange={(e)=> this.handleTimeChange(e)}\n      handleVolumeChange={(e)=> this.handleVolumeChange(e)}\n      />\n      </section>\n      </section>\n\n    );\n  }\n}\nexport default Album;\n"]},"metadata":{},"sourceType":"module"}