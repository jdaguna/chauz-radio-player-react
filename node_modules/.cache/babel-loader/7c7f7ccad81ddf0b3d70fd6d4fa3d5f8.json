{"ast":null,"code":"import _classCallCheck from \"/Users/josh/Desktop/bloc-jams-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/josh/Desktop/bloc-jams-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/josh/Desktop/bloc-jams-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/josh/Desktop/bloc-jams-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/josh/Desktop/bloc-jams-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/josh/Desktop/bloc-jams-react/src/components/Album.js\";\nimport React, { Component } from 'react';\nimport albumData from './../data/albums';\nimport PlayerBar from './PlayerBar';\n\nvar Album =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Album, _Component);\n\n  function Album(props) {\n    var _this;\n\n    _classCallCheck(this, Album);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Album).call(this, props));\n    var album = albumData.find(function (album) {\n      return album.slug === _this.props.match.params.slug;\n    });\n    _this.state = {\n      album: album,\n      currentSong: null,\n      currentTime: 0,\n      duration: album.songs[0].duration,\n      isPlaying: false,\n      isHovered: false\n    };\n    _this.audioElement = document.createElement('audio');\n    _this.audioElement.src = album.songs[0].audioSrc;\n    return _this;\n  }\n\n  _createClass(Album, [{\n    key: \"handleHoverOn\",\n    value: function handleHoverOn() {\n      this.setState({\n        hover: true\n      });\n    }\n  }, {\n    key: \"handleHoverOff\",\n    value: function handleHoverOff() {\n      this.setState({\n        hover: false\n      });\n    }\n  }, {\n    key: \"play\",\n    value: function play() {\n      this.audioElement.play();\n      this.setState({\n        isPlaying: true\n      });\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.audioElement.pause();\n      this.setState({\n        isPlaying: false\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this.eventListeners = {\n        timeupdate: function timeupdate(e) {\n          _this2.setState({\n            currentTime: _this2.audioElement.currentTime\n          });\n        },\n        durationchange: function durationchange(e) {\n          _this2.setState({\n            duration: _this2.audioElement.duration\n          });\n        }\n      };\n      this.audioElement.addEventListener('timeupdate', this.eventListeners.timeupdate);\n      this.audioElement.addEventListener('durationchange', this.eventListeners.durationchnage);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.audioElement.src = null;\n      this.audioElement.removeEventListener('timeupdate', this.eventListeners.timeupdate);\n      this.audioElement.removeEventListener('durationchange', this.eventListeners.durationchange);\n    }\n  }, {\n    key: \"setSong\",\n    value: function setSong(song) {\n      this.audioElement.src = song.audioSrc;\n      this.setState({\n        currentSong: song\n      });\n    }\n  }, {\n    key: \"handleSongClick\",\n    value: function handleSongClick(song) {\n      var isSameSong = this.state.currentSong === song;\n\n      if (this.state.isPlaying && isSameSong) {\n        this.pause();\n      } else {\n        if (!isSameSong) {\n          this.setSong(song);\n        }\n\n        this.play();\n      }\n    }\n  }, {\n    key: \"handlePrevClick\",\n    value: function handlePrevClick() {\n      var _this3 = this;\n\n      var currentIndex = this.state.album.songs.findIndex(function (song) {\n        return _this3.state.currentSong === song;\n      });\n      var newIndex = Math.max(0, currentIndex - 1);\n      var newSong = this.state.album.songs[newIndex];\n      this.setSong(newSong);\n      this.play();\n    }\n  }, {\n    key: \"handleNextClick\",\n    value: function handleNextClick() {\n      var _this4 = this;\n\n      var currentIndex = this.state.album.songs.findIndex(function (song) {\n        return _this4.state.currentSong === song;\n      });\n      var newIndex = Math.min(currentIndex + 1, this.state.album.songs.length - 1);\n      var newSong = this.state.album.songs[newIndex];\n      this.setSong(newSong);\n      this.play();\n    }\n  }, {\n    key: \"handleTimeChange\",\n    value: function handleTimeChange(e) {\n      var newTime = this.audioElement.duration * e.target.value;\n      this.audioElement.currentTime = newTime;\n      this.setState({\n        currentTime: newTime\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this;\n\n      return React.createElement(\"section\", {\n        className: \"album\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"section\", {\n        id: \"album-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        id: \"album-cover-art\",\n        src: this.state.album.albumCover,\n        alt: this.state.album.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"album-details\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        id: \"album-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, this.state.album.title), React.createElement(\"h2\", {\n        className: \"artist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }, this.state.album.artist), React.createElement(\"div\", {\n        id: \"release-info\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, this.state.album.releaseInfo))), React.createElement(\"table\", {\n        id: \"song-list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"colgroup\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"col\", {\n        id: \"song-number-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(\"col\", {\n        id: \"song-title-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }), React.createElement(\"col\", {\n        id: \"song-duration-column\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      })), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, this.state.album.songs.map(function (song, index) {\n        return React.createElement(\"tr\", {\n          className: \"song\",\n          key: index,\n          onClick: function onClick() {\n            return _this5.handleSongClick(song);\n          },\n          onMouseEnter: function onMouseEnter() {\n            return _this5.setState({\n              isHovered: index + 1\n            });\n          },\n          onMouseLeave: function onMouseLeave() {\n            return _this5.setState({\n              isHovered: false\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          className: \"song-actions\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122\n          },\n          __self: this\n        }, _this5.state.currentSong && _this5.state.currentSong.title === song.title ? React.createElement(\"span\", {\n          className: _this5.state.isPlaying ? \"ion-ios-pause\" : \"ion-ios-play\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }) : _this5.state.isHovered === index + 1 ? React.createElement(\"span\", {\n          className: \"ion-ios-play\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 128\n          },\n          __self: this\n        }) : React.createElement(\"span\", {\n          className: \"song-number\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, index + 1))), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, song.title), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, song.duration));\n      }))), React.createElement(PlayerBar, {\n        isPlaying: this.state.isPlaying,\n        currentSong: this.state.currentSong,\n        currentTime: this.audioElement.currentTime,\n        duration: this.audioElement.duration,\n        handleSongClick: function handleSongClick() {\n          return _this5.handleSongClick(_this5.state.currentSong);\n        },\n        handlePrevClick: function handlePrevClick() {\n          return _this5.handlePrevClick();\n        },\n        handleNextClick: function handleNextClick() {\n          return _this5.handleNextClick();\n        },\n        handleTimeChange: function handleTimeChange(e) {\n          return _this5.handleTimeChange(e);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Album;\n}(Component);\n\nexport default Album;","map":{"version":3,"sources":["/Users/josh/Desktop/bloc-jams-react/src/components/Album.js"],"names":["React","Component","albumData","PlayerBar","Album","props","album","find","slug","match","params","state","currentSong","currentTime","duration","songs","isPlaying","isHovered","audioElement","document","createElement","src","audioSrc","setState","hover","play","pause","eventListeners","timeupdate","e","durationchange","addEventListener","durationchnage","removeEventListener","song","isSameSong","setSong","currentIndex","findIndex","newIndex","Math","max","newSong","min","length","newTime","target","value","albumCover","title","artist","releaseInfo","map","index","handleSongClick","handlePrevClick","handleNextClick","handleTimeChange"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport albumData from './../data/albums';\nimport PlayerBar from './PlayerBar';\nclass Album extends Component{\n constructor(props){\n  super(props);\n\n const album = albumData.find( album => {\n  return album.slug === this.props.match.params.slug\n });\n\n  this.state = {\n   album: album,\n   currentSong: null,\n   currentTime: 0,\n   duration: album.songs[0].duration,\n   isPlaying: false,\n   isHovered: false\n  };\n\n\n this.audioElement = document.createElement('audio');\n this.audioElement.src = album.songs[0].audioSrc;\n}\n handleHoverOn(){\n  this.setState({   hover:true  });\n }\n \nhandleHoverOff(){\n  this.setState({hover:false});\n }\n\n\n\n play(){\n  this.audioElement.play();\n  this.setState({isPlaying: true});\n }\n\n pause(){\n  this.audioElement.pause();\n  this.setState({isPlaying: false});\n }\n\n componentDidMount(){\n  this.eventListeners={\n    timeupdate: e =>{\n     this.setState({ currentTime: this.audioElement.currentTime });\n    },\n    durationchange: e => {\n     this.setState({duration: this.audioElement.duration});\n    }\n  };\n  this.audioElement.addEventListener('timeupdate', this.eventListeners.timeupdate);\n  this.audioElement.addEventListener('durationchange', this.eventListeners.durationchnage);\n }\n\n componentWillUnmount () {\n  this.audioElement.src = null;\n  this.audioElement.removeEventListener('timeupdate', this.eventListeners.timeupdate);\n  this.audioElement.removeEventListener('durationchange', this.eventListeners.durationchange);\n }\n\n setSong(song){\n  this.audioElement.src = song.audioSrc;\n  this.setState({currentSong: song});\n }\n\n handleSongClick(song){\n  const isSameSong = this.state.currentSong === song;\n  if (this.state.isPlaying && isSameSong){\n   this.pause();\n  }else{\n   if (!isSameSong){this.setSong(song);}\n   this.play();\n  }\n }\n \n handlePrevClick(){\n  const currentIndex = this.state.album.songs.findIndex(song => this.state.currentSong === song);\n  const newIndex = Math.max(0, currentIndex - 1);\n  const newSong = this.state.album.songs[newIndex];\n  this.setSong(newSong);\n  this.play(); \n }\n\n handleNextClick(){\n  const currentIndex = this.state.album.songs.findIndex(song => this.state.currentSong === song);\n  const newIndex = Math.min(currentIndex+1, this.state.album.songs.length-1);\n  const newSong = this.state.album.songs[newIndex];\n  this.setSong(newSong);\n  this.play();\n}\n\n handleTimeChange(e) {\n  const newTime = this.audioElement.duration * e.target.value;\n  this.audioElement.currentTime = newTime;\n  this.setState({ currentTime: newTime });\n }\n\n render(){\n  return(\n   <section className=\"album\">\n    <section id=\"album-info\">\n     <img id=\"album-cover-art\" src={this.state.album.albumCover} alt={this.state.album.title}/>\n     <div className=\"album-details\">\n      <h1 id=\"album-title\">{this.state.album.title}</h1>\n      <h2 className=\"artist\">{this.state.album.artist}</h2>\n      <div id=\"release-info\">{this.state.album.releaseInfo}</div>\n     </div>\n    </section>\n    <table id=\"song-list\">\n     <colgroup>\n      <col id=\"song-number-column\" />\n      <col id=\"song-title-column\" />\n      <col id=\"song-duration-column\"/>\n     </colgroup>\n     <tbody>\n      {this.state.album.songs.map((song, index) => \n       <tr className=\"song\" key={index} onClick={()=>this.handleSongClick(song)} onMouseEnter={()=> this.setState({isHovered : index+1})} onMouseLeave={()=> this.setState({isHovered: false})}>\n\t<td className=\"song-actions\">\n\t <button>\n\t  {\n\t   (this.state.currentSong && this.state.currentSong.title === song.title) ?\n\t   <span className={this.state.isPlaying ? \"ion-ios-pause\" : \"ion-ios-play\"}></span>\n\t   :\n\t   (this.state.isHovered === index+1) ?\n\t   <span className=\"ion-ios-play\"></span>\n\t   :\n\t   <span className=\"song-number\">{index+1}</span>\n\t  }\n\t </button>\n\t</td>\n\t<td>{song.title}</td>\n\n\t<td>{song.duration}</td>\n       </tr>\n      )} \n     </tbody>\n    </table>\n    <PlayerBar \n\tisPlaying={this.state.isPlaying} \n\tcurrentSong={this.state.currentSong} \n\tcurrentTime={this.audioElement.currentTime}\n\tduration={this.audioElement.duration}\n\thandleSongClick={()=>this.handleSongClick(this.state.currentSong)} \n\thandlePrevClick={()=>this.handlePrevClick()} \n\thandleNextClick={()=>this.handleNextClick()}\n \thandleTimeChange={(e) => this.handleTimeChange(e)}\n \t/>  \n </section>\n  );\n }\n}\nexport default Album;\n"]},"metadata":{},"sourceType":"module"}